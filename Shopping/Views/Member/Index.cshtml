@{
    ViewData["Title"] = "登入/註冊";
}
@section Styles {
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    
}

<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
    <input type="radio" class="btn-check" name="btnradio" id="btnLogin" autocomplete="off" checked>
    <label class="btn btn-outline-success" for="btnLogin">登入</label>
    <input type="radio" class="btn-check" name="btnradio" id="btnSignup" autocomplete="off">
    <label class="btn btn-outline-success" for="btnSignup">註冊</label>
</div>

@* 登入表單 *@
<div id="Login" class="form-container">
    <h3 class="text-success">登入會員</h3>
    <form asp-controller="Member" asp-action="Login" method="post">
        <label class="text-success">電子郵件</label>
        <input type="text" name="LoginAccount" id="LoginEmail" placeholder="請輸入帳號"/>
        <label class="text-success">密碼</label>
        <input type="password" name="LoginPassword" id="LoginPsw" placeholder="請輸入密碼"/>
        <button class="btn btn-outline-success" type="submit" id="LoginBtn">登入</button>
    </form>
</div>

@* 註冊表單 *@
<div id="Signup" class="form-container d-none">
    <h3 class="text-success">註冊會員</h3>
    <form asp-controller="Member" asp-action="Signup" method="post">
        <label class="text-success">使用者名稱</label>
        <input type="text" name="name" placeholder="請輸入名稱" id="name" />
        <label class="text-success">電子郵件</label>
        <input type="text" name="SignupAccount" placeholder="請輸入帳號" id="SignupEmail" />
        <label class="text-success">密碼</label>
        <input type="password" name="SignupPassword" placeholder="請輸入密碼" id="SignupPsw" />
        <label class="text-success">確認密碼</label>
        <input type="password" name="SignupPasswordConfirmed" placeholder="請再次輸入密碼" />
        <button class="btn btn-outline-success" type="submit" id="SignupBtn">註冊</button>
    </form>
</div>

@section Scripts{
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js" integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        $(document).ready(function(){
            $("#btnLogin").on("click",()=>{
            $("#Signup").addClass("d-none");
            $("#Login").removeClass("d-none");
            });

            $("#btnSignup").on("click",()=>{
            $("#Login").addClass("d-none");
            $("#Signup").removeClass("d-none");
            });

            $("#LoginBtn").on("click", async ()=>{
                var email = $("#LoginEmail").val();
                var psw = $("#LoginPsw").val();
                Login(email,psw);
            });

            $("#SignupBtn").on("click",()=>{
                var email = $("#SignupEmail").val();
                var psw = $("#SignupPsw").val();
                var name = $("#name").val();
                Signup(email,psw,name;
            });

            function Login(email,psw){
                if(!email || !psw) return Swal.fire("電子郵件和密碼為必填欄位");

                $.ajax({
                    type:"POST",
                    url:"Member/Login",
                    data:{Email:email,Password:psw},
                    success:function(res){
                        if(res.success)
                    },
                });
            };

            function Signup(email,psw,name){
                if(!email||!psw||!name) return Swal.fire("電子郵件、密碼、和名稱為必填欄位");

                $.ajax({
                    type:"POST",
                    url:"Member/Signup",
                    data:{Email:email,Password:psw,UserName:name},
                    success:function(){

                    };
                });
            };
        });
    </script>
}