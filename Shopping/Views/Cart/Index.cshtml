@model List<Shopping.Models.DTOs.CartItemSessionDTO>
@using Microsoft.AspNetCore.Http
@{
    ViewData["Title"] = "購物車";
}
@{
    var UserId = Context.Session.GetInt32("UserId");
    var UserName = Context.Session.GetString("UserName");
    var Email = Context.Session.GetString("Email");
}
<h2 class="text-center text-success fw-bold mb-3"> @UserName 的購物車</h2>
@if (!Model.Any())
{
    <h3 class="text-center text-success fw-bold m-2">購物車目前無商品</h3>
    <a asp-controller="Product" asp-action="Index" class="text-success fs-2">繼續購物</a>
}
else
{
    <table class="table table-bordered align-middle">
        <thead>
            <tr>
                <th class="text-success fw-bold">名稱</th>
                <th class="text-success fw-bold text-center" style="width:120px">單價</th>
                <th class="text-success fw-bold text-center" style="width:120px">數量</th>
                <th class="text-success fw-bold text-center" style="width:120px">小計</th>
            </tr>
        </thead>

        <tbody>
            @foreach(var item in Model)
            {
                <tr>
                    <td>@item.ProductName</td>
                    <td class="text-center">NT$@item.Price</td>
                    <td class="text-center">@item.Quantity</td>
                    <td class="text-center text-success fw-bold">NT$@item.SubTotal</td>
                </tr>
            }
            <a asp-controller="Product" asp-action="Index" class="text-success fs-4">繼續購物</a>
        </tbody>
    </table>
}
<div>
    <h3 class="mt-3">總金額:</h3>
    <span class="text-center text-success fw-bold">NT$ @Model.Sum(s => s.SubTotal)</span>
</div>