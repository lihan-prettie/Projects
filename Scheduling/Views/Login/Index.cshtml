@{
    ViewData["Title"] = "使用者登入";
}
@section Styles{
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        input {
            margin-bottom: 10px;
            padding: 5px;
            width: 250px;
        }

        button {
            padding: 6px 15px;
            cursor: pointer;
        }
    </style>
}

<h1>使用者登入</h1>
<h3>電子信箱:</h3>
<input type="email" placeholder="xx@mail.com" id="account" class="form-control" />
<h3>密碼:</h3>
<input type="password" id="password" class="form-control" />
<button id="confirm" class="btn btn-outline-warning">確認</button>

@section Scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $("#confirm").on("click",()=>{
            
            var account = $("#account").val().trim();
            var password = $("#password").val().trim();
            if (!account || !password){
                Swal.fire({
                    title:"請重新輸入",
                    text:"帳號密碼為必填欄位",
                    icon:"error",
                    confirmButtonText:"確認",
                });
                return;
            }else{
                $.ajax({
                    type:"POST",
                    url:"/Login/LoginCheck",
                    data:{UserEmail:account,UserPassword:password},
                    success:function(res){
                        if(res.success){
                            Swal.fire("登入成功","","success").then(()=>{
                                window.location.href=res.redirectUrl;
                            });
                        }else{
                            Swal.fire("登入失敗","請重新確認並輸入正確的帳號密碼","error");
                        }
                    },
                    error:function(){
                        Swal.fire("錯誤","請聯絡工程師","error");
                    }
                });
            };
        });
    </script>
}